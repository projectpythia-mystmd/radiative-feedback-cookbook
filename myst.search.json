{"version":"1","records":[{"hierarchy":{"lvl1":"Radiative Feedback Cookbook"},"type":"lvl1","url":"/","position":0},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook"},"content":"\n\n\n\n\n\n\n\n\n\nThis Project Pythia Cookbook explores the fundamental science and practice of radiative feedback analysis applied to climate model output.","type":"content","url":"/","position":1},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Motivation"},"type":"lvl2","url":"/#motivation","position":2},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Motivation"},"content":"There are several well-established methods for quantifying radiative feedbacks from climate model output, and these have been widely used in the scientific literature. However, a comprehensive set of tutorials representing best practices for implementing these methods has been lacking, forcing new practioners to “reinvent the wheel” and piece together the implementation details from sometimes incomplete descriptions in the primary literature.\n\nThis Cookbook aims to fill this gap by collecting a verbose set of tutorials that take the reader through some of the basic theory and implementation details, with plentiful example code that can be easily adapted to new datasets and new research applications. The examples will skew heavily toward the method of radiative kernels, with some comparison to other methods.","type":"content","url":"/#motivation","position":3},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Authors"},"type":"lvl2","url":"/#authors","position":4},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Authors"},"content":"Brian Rose, \n\nRachel Tam, \n\nTy Janoski, \n\nRobert Ford, \n\nHannah Zafar, and \n\nAna Castaneda Montoya","type":"content","url":"/#authors","position":5},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Contributors","lvl2":"Authors"},"type":"lvl3","url":"/#contributors","position":6},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Contributors","lvl2":"Authors"},"content":"","type":"content","url":"/#contributors","position":7},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Structure"},"type":"lvl2","url":"/#structure","position":8},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Structure"},"content":"This Cookbook is organized as follows:","type":"content","url":"/#structure","position":9},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Foundations","lvl2":"Structure"},"type":"lvl3","url":"/#foundations","position":10},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Foundations","lvl2":"Structure"},"content":"This section takes the reader through some of the basic ideas and provides an overview of the mathematical theory underlying the radiative kernel method.","type":"content","url":"/#foundations","position":11},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Feedback Analysis","lvl2":"Structure"},"type":"lvl3","url":"/#feedback-analysis","position":12},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Feedback Analysis","lvl2":"Structure"},"content":"This section links the theory to the practice by demonstrating the detailed implementation of some radiative feedback calculations.","type":"content","url":"/#feedback-analysis","position":13},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Simplifying Calculations","lvl2":"Structure"},"type":"lvl3","url":"/#simplifying-calculations","position":14},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Simplifying Calculations","lvl2":"Structure"},"content":"This section gives more practical example code for carrying out feedback calculations on CMIP6 data, making use of some specialized software packages.","type":"content","url":"/#simplifying-calculations","position":15},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Running the Notebooks"},"type":"lvl2","url":"/#running-the-notebooks","position":16},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl2":"Running the Notebooks"},"content":"You can either run the notebook using \n\nBinder or on your local machine.","type":"content","url":"/#running-the-notebooks","position":17},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Running on Binder","lvl2":"Running the Notebooks"},"type":"lvl3","url":"/#running-on-binder","position":18},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Running on Binder","lvl2":"Running the Notebooks"},"content":"The simplest way to interact with a Jupyter Notebook is through\n\n\nBinder, which enables the execution of a\n\n\nJupyter Book in the cloud. The details of how this works are not\nimportant for now. All you need to know is how to launch a Pythia\nCookbooks chapter via Binder. Simply navigate your mouse to\nthe top right corner of the book chapter you are viewing and click\non the rocket ship icon, (see figure below), and be sure to select\n“launch Binder”. After a moment you should be presented with a\nnotebook that you can interact with. I.e. you’ll be able to execute\nand even change the example programs. You’ll see that the code cells\nhave no output at first, until you execute them by pressing\nShift+Enter. Complete details on how to interact with\na live Jupyter notebook are described in \n\nGetting Started with\nJupyter.","type":"content","url":"/#running-on-binder","position":19},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Running on Your Own Machine","lvl2":"Running the Notebooks"},"type":"lvl3","url":"/#running-on-your-own-machine","position":20},{"hierarchy":{"lvl1":"Radiative Feedback Cookbook","lvl3":"Running on Your Own Machine","lvl2":"Running the Notebooks"},"content":"If you are interested in running this material locally on your computer, you will need to follow this workflow:\n\nClone the https://github.com/ProjectPythia/radiative-feedback-cookbook repository: git clone https://github.com/ProjectPythia/radiative-feedback-cookbook.git\n\nMove into the radiative-feedback-cookbook directorycd radiative-feedback-cookbook\n\nCreate and activate your conda environment from the environment.yml fileconda env create -f environment.yml\nconda activate feedback-cookbook-dev\n\nMove into the notebooks directory and start up Jupyterlabcd notebooks/\njupyter lab","type":"content","url":"/#running-on-your-own-machine","position":21},{"hierarchy":{"lvl1":"APRP"},"type":"lvl1","url":"/notebooks/feedback-analysis/aprp","position":0},{"hierarchy":{"lvl1":"APRP"},"content":"Let’s start here! If you can directly link to an image relevant to your notebook, such as \n\ncanonical logos, do so here at the top of your notebook. You can do this with Markdown syntax,\n\n![<image title>](http://link.com/to/image.png \"image alt text\")\n\nor edit this cell to see raw HTML img demonstration. This is preferred if you need to shrink your embedded image. Either way be sure to include alt text for any embedded images to make your content more accessible.\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp","position":1},{"hierarchy":{"lvl1":"APRP"},"type":"lvl1","url":"/notebooks/feedback-analysis/aprp#aprp","position":2},{"hierarchy":{"lvl1":"APRP"},"content":"Next, title your notebook appropriately with a top-level Markdown header, #. Do not use this level header anywhere else in the notebook. Our book build process will use this title in the navbar, table of contents, etc. Keep it short, keep it descriptive. Follow this with a --- cell to visually distinguish the transition to the prerequisites section.\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#aprp","position":3},{"hierarchy":{"lvl1":"APRP","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#overview","position":4},{"hierarchy":{"lvl1":"APRP","lvl2":"Overview"},"content":"If you have an introductory paragraph, lead with it here! Keep it short and tied to your material, then be sure to continue into the required list of topics below,\n\nThis is a numbered list of the specific topics\n\nThese should map approximately to your main sections of content\n\nOr each second-level, ##, header in your notebook\n\nKeep the size and scope of your notebook in check\n\nAnd be sure to let the reader know up front the important concepts they’ll be leaving with\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#overview","position":5},{"hierarchy":{"lvl1":"APRP","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#prerequisites","position":6},{"hierarchy":{"lvl1":"APRP","lvl2":"Prerequisites"},"content":"This section was inspired by \n\nthis template of the wonderful \n\nThe Turing Way Jupyter Book.\n\nFollowing your overview, tell your reader what concepts, packages, or other background information they’ll need before learning your material. Tie this explicitly with links to other pages here in Foundations or to relevant external resources. Remove this body text, then populate the Markdown table, denoted in this cell with | vertical brackets, below, and fill out the information following. In this table, lay out prerequisite concepts by explicitly linking to other Foundations material or external resources, or describe generally helpful concepts.\n\nLabel the importance of each concept explicitly as helpful/necessary.\n\nConcepts\n\nImportance\n\nNotes\n\nIntro to Cartopy\n\nNecessary\n\n\n\nUnderstanding of NetCDF\n\nHelpful\n\nFamiliarity with metadata structure\n\nProject management\n\nHelpful\n\n\n\nTime to learn: estimate in minutes. For a rough idea, use 5 mins per subsection, 10 if longer; add these up for a total. Safer to round up and overestimate.\n\nSystem requirements:\n\nPopulate with any system, version, or non-Python software requirements if necessary\n\nOtherwise use the concepts table above and the Imports section below to describe required packages as necessary\n\nIf no extra requirements, remove the System requirements point altogether\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#prerequisites","position":7},{"hierarchy":{"lvl1":"APRP","lvl2":"Imports"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#imports","position":8},{"hierarchy":{"lvl1":"APRP","lvl2":"Imports"},"content":"Begin your body of content with another --- divider before continuing into this section, then remove this body text and populate the following code cell with all necessary Python imports up-front:\n\nimport sys\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#imports","position":9},{"hierarchy":{"lvl1":"APRP","lvl2":"Your first content section"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#your-first-content-section","position":10},{"hierarchy":{"lvl1":"APRP","lvl2":"Your first content section"},"content":"\n\nThis is where you begin your first section of material, loosely tied to your objectives stated up front. Tie together your notebook as a narrative, with interspersed Markdown text, images, and more as necessary,\n\n# as well as any and all of your code cells\nprint(\"Hello world!\")\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#your-first-content-section","position":11},{"hierarchy":{"lvl1":"APRP","lvl3":"A content subsection","lvl2":"Your first content section"},"type":"lvl3","url":"/notebooks/feedback-analysis/aprp#a-content-subsection","position":12},{"hierarchy":{"lvl1":"APRP","lvl3":"A content subsection","lvl2":"Your first content section"},"content":"Divide and conquer your objectives with Markdown subsections, which will populate the helpful navbar in Jupyter Lab and here on the Jupyter Book!\n\n# some subsection code\nnew = \"helpful information\"\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#a-content-subsection","position":13},{"hierarchy":{"lvl1":"APRP","lvl3":"Another content subsection","lvl2":"Your first content section"},"type":"lvl3","url":"/notebooks/feedback-analysis/aprp#another-content-subsection","position":14},{"hierarchy":{"lvl1":"APRP","lvl3":"Another content subsection","lvl2":"Your first content section"},"content":"Keep up the good work! A note, try to avoid using code comments as narrative, and instead let them only exist as brief clarifications where necessary.\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#another-content-subsection","position":15},{"hierarchy":{"lvl1":"APRP","lvl2":"Your second content section"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#your-second-content-section","position":16},{"hierarchy":{"lvl1":"APRP","lvl2":"Your second content section"},"content":"Here we can move on to our second objective, and we can demonstrate\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#your-second-content-section","position":17},{"hierarchy":{"lvl1":"APRP","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl3","url":"/notebooks/feedback-analysis/aprp#subsection-to-the-second-section","position":18},{"hierarchy":{"lvl1":"APRP","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/feedback-analysis/aprp#subsection-to-the-second-section","position":19},{"hierarchy":{"lvl1":"APRP","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl4","url":"/notebooks/feedback-analysis/aprp#a-quick-demonstration","position":20},{"hierarchy":{"lvl1":"APRP","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/feedback-analysis/aprp#a-quick-demonstration","position":21},{"hierarchy":{"lvl1":"APRP","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl5","url":"/notebooks/feedback-analysis/aprp#of-further-and-further","position":22},{"hierarchy":{"lvl1":"APRP","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/feedback-analysis/aprp#of-further-and-further","position":23},{"hierarchy":{"lvl1":"APRP","lvl6":"header levels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl6","url":"/notebooks/feedback-analysis/aprp#header-levels","position":24},{"hierarchy":{"lvl1":"APRP","lvl6":"header levels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"\n\nas well m = a * t / h text! Similarly, you have access to other \\LaTeX equation \n\nfunctionality via MathJax (demo below from link),\\begin{align}\n\\dot{x} & = \\sigma(y-x) \\\\\n\\dot{y} & = \\rho x - y - xz \\\\\n\\dot{z} & = -\\beta z + xy\n\\end{align}\n\nCheck out \n\nany number of helpful Markdown resources for further customizing your notebooks and the \n\nJupyter docs for Jupyter-specific formatting information. Don’t hesitate to ask questions if you have problems getting it to look just right.\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#header-levels","position":25},{"hierarchy":{"lvl1":"APRP","lvl2":"Last Section"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#last-section","position":26},{"hierarchy":{"lvl1":"APRP","lvl2":"Last Section"},"content":"If you’re comfortable, and as we briefly used for our embedded logo up top, you can embed raw html into Jupyter Markdown cells (edit to see):\n\nInfoYour relevant information here!\n\nFeel free to copy this around and edit or play around with yourself. Some other admonitions you can put in:\n\nSuccessWe got this done after all!\n\nWarningBe careful!\n\nDangerScary stuff be here.\n\nWe also suggest checking out Jupyter Book’s \n\nbrief demonstration on adding cell tags to your cells in Jupyter Notebook, Lab, or manually. Using these cell tags can allow you to \n\ncustomize how your code content is displayed and even \n\ndemonstrate errors without altogether crashing our loyal army of machines!\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#last-section","position":27},{"hierarchy":{"lvl1":"APRP","lvl2":"Summary"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#summary","position":28},{"hierarchy":{"lvl1":"APRP","lvl2":"Summary"},"content":"Add one final --- marking the end of your body of content, and then conclude with a brief single paragraph summarizing at a high level the key pieces that were learned and how they tied to your objectives. Look to reiterate what the most important takeaways were.","type":"content","url":"/notebooks/feedback-analysis/aprp#summary","position":29},{"hierarchy":{"lvl1":"APRP","lvl3":"What’s next?","lvl2":"Summary"},"type":"lvl3","url":"/notebooks/feedback-analysis/aprp#whats-next","position":30},{"hierarchy":{"lvl1":"APRP","lvl3":"What’s next?","lvl2":"Summary"},"content":"Let Jupyter book tie this to the next (sequential) piece of content that people could move on to down below and in the sidebar. However, if this page uniquely enables your reader to tackle other nonsequential concepts throughout this book, or even external content, link to it here!\n\n","type":"content","url":"/notebooks/feedback-analysis/aprp#whats-next","position":31},{"hierarchy":{"lvl1":"APRP","lvl2":"Resources and references"},"type":"lvl2","url":"/notebooks/feedback-analysis/aprp#resources-and-references","position":32},{"hierarchy":{"lvl1":"APRP","lvl2":"Resources and references"},"content":"Finally, be rigorous in your citations and references as necessary. Give credit where credit is due. Also, feel free to link to relevant external material, further reading, documentation, etc. Then you’re done! Give yourself a quick review, a high five, and send us a pull request. A few final notes:\n\nKernel > Restart Kernel and Run All Cells... to confirm that your notebook will cleanly run from start to finish\n\nKernel > Restart Kernel and Clear All Outputs... before committing your notebook, our machines will do the heavy lifting\n\nTake credit! Provide author contact information if you’d like; if so, consider adding information here at the bottom of your notebook\n\nGive credit! Attribute appropriate authorship for referenced code, information, images, etc.\n\nOnly include what you’re legally allowed: no copyright infringement or plagiarism\n\nThank you for your contribution!","type":"content","url":"/notebooks/feedback-analysis/aprp#resources-and-references","position":33},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels"},"type":"lvl1","url":"/notebooks/feedback-analysis/manual-calc","position":0},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels"},"content":"\n\nNoteThis content is under construction!\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc","position":1},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels"},"type":"lvl1","url":"/notebooks/feedback-analysis/manual-calc#feedback-analysis-using-radiative-kernels","position":2},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels"},"content":"\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#feedback-analysis-using-radiative-kernels","position":3},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#overview","position":4},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Overview"},"content":"This notebook details all of the steps required to perform a radiative kernel analysis.\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#overview","position":5},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#prerequisites","position":6},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Prerequisites"},"content":"Concepts\n\nImportance\n\nNotes\n\nLoading CMIP6 data with Intake-ESM\n\nHelpful\n\n\n\nIntro to Xarray\n\nNecessary\n\n\n\nTime to learn: 60 minutes\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#prerequisites","position":7},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Imports"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#imports","position":8},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Imports"},"content":"\n\nimport xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport xesmf as xe\nimport intake\nimport s3fs\nimport fsspec\nimport glob\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#imports","position":9},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Loading in required data"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#loading-in-required-data","position":10},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Loading in required data"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#loading-in-required-data","position":11},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Climate model output","lvl2":"Loading in required data"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#climate-model-output","position":12},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Climate model output","lvl2":"Loading in required data"},"content":"In this example, we will perform the analysis on a single model from the CMIP6 ensemble, CESM2. The simplest way to calculate feedbacks is to take differences between two climate states, as opposed to regressions. Here we use runs with:\n\npreindustrial conditions (piControl) as the control climate\n\ninstantaneously quadrupled CO2 (abrupt-4xCO2) as the perturbed climate\n\nWe will use CMIP6 data hosted on Pangeo’s Google Cloud Storage:\n\ncat_url = 'https://storage.googleapis.com/cmip6/pangeo-cmip6.json'\ncol = intake.open_esm_datastore(cat_url)\n\nThe fields (and CMIP names) required to calculate each feedback are:\n\nAlbedo: upwelling and downwelling SW radiation at the surface (rsus and rsds)\n\nTemperature (Planck and lapse rate): air temperature (ta) and surface temperature (ts)\n\nWater vapor: specific humidity (hus) and air temperature\n\nSW CRE: Net SW radiation at TOA (down rsdt minus up rsut) and clear-sky versions (down, which is the same, minus up rsutcs)\n\nLW CRE: Net LW radiation at TOA (rlut) and the clear-sky version (rlutcs)\n\nThe cloud feedbacks require the results from the other feedbacks to correct for noncloud contributions to the CREs.\n\nWe will also need near-surface air temperature (tas) for calculating the change in global mean surface temperature (GMST).\n\ncat = col.search(activity_id='CMIP', experiment_id=['piControl', 'abrupt-4xCO2'], table_id='Amon', source_id='CESM2', \n                 variable_id=['rsus', 'rsds', 'ta', 'ts', 'hus', 'rsdt', 'rsut', 'rsutcs', 'rlut', 'rlutcs', 'tas'])\ncat.df\n\ndset_dict = cat.to_dataset_dict(zarr_kwargs={'consolidated': True})\n\nctrl = dset_dict['CMIP.NCAR.CESM2.piControl.Amon.gn']\n\nctrl\n\npert = dset_dict['CMIP.NCAR.CESM2.abrupt-4xCO2.Amon.gn']\n\npert\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#climate-model-output","position":13},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Radiative forcing data","lvl2":"Loading in required data"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#radiative-forcing-data","position":14},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Radiative forcing data","lvl2":"Loading in required data"},"content":"To calculate the cloud feedback, we will need the effective radiative forcing (ERF) resulting from 4xCO2, which we can find under another project, RFMIP:\n\nrf_cat = col.search(activity_id='RFMIP', experiment_id='piClim-4xCO2', source_id='CESM2')\nrf_cat.df\n\nrf_dset_dict = rf_cat.to_dataset_dict(zarr_kwargs={'consolidated': True})\n\nforcing = rf_dset_dict['RFMIP.NCAR.CESM2.piClim-4xCO2.Amon.gn']\nforcing\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#radiative-forcing-data","position":15},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Radiative kernels","lvl2":"Loading in required data"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#radiative-kernels","position":16},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Radiative kernels","lvl2":"Loading in required data"},"content":"We will load in radiative kernels from Project Pythia’s storage on JetStream2. We will be using the ERA5 kernels \n\n(Huang & Huang 2023).\n\nURL = 'https://js2.jetstream-cloud.org:8001/'\npath = f'pythia/ClimKern'\nfs = fsspec.filesystem(\"s3\", anon=True, client_kwargs=dict(endpoint_url=URL))\npatternKern = f's3://{path}/kernels/ERA5/*.nc'\npatternTutorial = f's3://{path}/tutorial_data/*.nc'\nfilesKern = sorted(fs.glob(patternKern))\nfilesTutorial = sorted(fs.glob(patternTutorial))\nfilesetKern = [fs.open(file) for file in filesKern[0:2]]\nfilesetTutorial = [fs.open(file) for file in filesKern[0:2]]\n\nWe will use the more common TOA kernels.\n\nfilesKern\n\nAs we will see in a moment, the naming convention for months as calculated from Xarray’s .groupby() method (“month”, 1-12) is different from what is used in the kernel dataset (“time”, 0-11), so we need to align them:\n\ndata_kern = xr.open_dataset(filesetKern[1])\ndata_kern['time'] = data_kern['time'] + 1\ndata_kern = data_kern.rename({'time': 'month'})\ndata_kern\n\nLet’s take a look at some of these kernels. First, the albedo kernel, annually averaged:\n\ndata_kern.sw_a.mean(dim='month').plot.contourf(levels=20)\n\nAnd the LW water vapor kernel, annually and zonally averaged:\n\ndata_kern.lw_q.mean(dim=['month', 'lon']).plot.contourf(levels=40, yincrease=False)\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#radiative-kernels","position":17},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Preparing data for analysis"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#preparing-data-for-analysis","position":18},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Preparing data for analysis"},"content":"\n\nDefine a function for taking global averages:\n\ndef global_average(data):\n    weights = np.cos(np.deg2rad(data.lat))\n    data_weighted = data.weighted(weights)\n    return data_weighted.mean(dim=['lat', 'lon'], skipna=True)\n\nTo get a general idea of how the climate changes in these runs, we can plot the 12-month rolling GMST for the two runs:\n\ngmst_ctrl = global_average(ctrl.tas.rolling(time=12, center=True).mean())\n\ngmst_ctrl.sel(time=slice('1150', '1200')).plot()\n\ngmst_pert = global_average(pert.tas.rolling(time=12, center=True).mean())\n\ngmst_pert.sel(time=slice('0949', '0999')).plot()\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#preparing-data-for-analysis","position":19},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Calculating the two climate states","lvl2":"Preparing data for analysis"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#calculating-the-two-climate-states","position":20},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Calculating the two climate states","lvl2":"Preparing data for analysis"},"content":"Ideally, we would want to compare two equilibrated climates, but since that is usually not possible with standard-length CMIP experiments, we will simply use the monthly climatology over the last 50 years available for each run, which is close enough to equilibrium. The pressure coordinates are in Pa, so let’s convert them to hPa to match the kernels:\n\nctrl_state = ctrl.sel(time=slice('1150', '1200')).groupby('time.month').mean(dim='time').squeeze()\npert_state = pert.sel(time=slice('0949', '0999')).groupby('time.month').mean(dim='time').squeeze()\n\nctrl_state['plev'] = ctrl_state['plev']/100\npert_state['plev'] = pert_state['plev']/100\n\npert_state\n\nWe will need the change in GMST in order to calculate the feedbacks:\n\ndgmst = global_average(pert_state.tas - ctrl_state.tas).mean(dim='month')\ndgmst.load()\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#calculating-the-two-climate-states","position":21},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Regridding","lvl2":"Preparing data for analysis"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#regridding","position":22},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Regridding","lvl2":"Preparing data for analysis"},"content":"The model output and kernels are not on the same grid, so we will regrid the kernel dataset to the model’s grid using the regridding package xesmf. For reusability, let’s define a function to regrid data:\n\ndef regrid(ds_in, regrid_to, method='bilinear'):\n    regridder = xe.Regridder(ds_in, regrid_to, method=method, periodic=True, ignore_degenerate=True)\n    ds_out = regridder(ds_in)\n    return ds_out\n\nregr_kernels = regrid(data_kern, pert_state)\n\nregr_kernels\n\nCheck that the kernels look as expected:\n\nregr_kernels.sw_a.mean(dim='month').plot.contourf(levels=20)\n\nregr_kernels.lw_q.mean(dim=['month', 'lon']).plot.contourf(levels=40, yincrease=False)\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#regridding","position":23},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Calculating feedbacks"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#calculating-feedbacks","position":24},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Calculating feedbacks"},"content":"For all noncloud feedbacks, we will calculate both the all-sky and clear-sky (indicated by clr in the kernel dataset here) change in TOA radiation \\Delta R. To do this, we just use the clear-sky version of the kernel in place of the all-sky kernel. The differences \\Delta R^\\mathrm{clear}_X-\\Delta R^\\mathrm{all}_X for each feedback X will be used to adjust the CREs into proper cloud feedbacks.\n\nFor the feedbacks involving fields that are a function of pressure (i.e., temperature and water vapor), we need to mask out the stratosphere. In this notebook, we will approximate this using a function that masks above 100 hPa at the equator and linearly decreases to 300 hPa at the poles:\n\ndef tropo_mask(ds):\n    return ds.where(ds.plev > ((200/90)*abs(ds.lat) + 100))\n\nCompare:\n\nctrl_state.ta.mean(dim=['month', 'lon']).plot(yincrease=False)\n\ntropo_mask(ctrl_state.ta.mean(dim=['month', 'lon'])).plot(yincrease=False)\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#calculating-feedbacks","position":25},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Surface albedo","lvl2":"Calculating feedbacks"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#surface-albedo","position":26},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Surface albedo","lvl2":"Calculating feedbacks"},"content":"\n\nThe first step is to calculate the change in albedo between the control and perturbed climates. The surface albedo α is defined as the fraction of downwelling solar radiation at the surface that is reflected back up. That is,\\alpha=\\frac{S^\\uparrow_\\mathrm{s}}{S^\\downarrow_\\mathrm{s}}=\\frac{\\mathtt{rsus}}{\\mathtt{rsds}}\n\nalb_ctrl = (ctrl_state.rsus/ctrl_state.rsds.where(ctrl_state.rsds > 0)).fillna(0)\nalb_pert = (pert_state.rsus/pert_state.rsds.where(ctrl_state.rsds > 0)).fillna(0)\n\nNote that we avoided dividing by zero by masking regions where rsds = 0 and filling in the resulting nans with 0. Now, take the difference:\n\ndalb = alb_pert - alb_ctrl\n\ndalb.mean(dim='month').plot()\n\nBy multiplying the change in albedo with the albedo kernel, we get the change in TOA radiation (in units W m-2) resulting from that change in albedo:\\Delta R_\\alpha=K_\\alpha\\cdot\\Delta\\alpha\n\nWe also need to multiply by 100 to get albedo as a percentage.\n\ndSW_alb = regr_kernels.sw_a * dalb * 100\ndSW_alb_clr = regr_kernels.swclr_a * dalb * 100\n\ndSW_alb.mean(dim='month').plot()\n\nThe feedback in units W m-2 K-1 is then calculated by normalizing this change in TOA radiation by the change in GMST:\\lambda_\\alpha=\\frac{\\Delta R_\\alpha}{\\Delta T_\\mathrm{s}}\n\nalb_feedback = dSW_alb/dgmst\n\nalb_feedback.mean(dim='month').plot()\n\nTaking the global and annual average, we get a final value of about 0.35 W m-2 K-1:\n\nglobal_average(alb_feedback.mean(dim='month')).load()\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#surface-albedo","position":27},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Temperature","lvl2":"Calculating feedbacks"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#temperature","position":28},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Temperature","lvl2":"Calculating feedbacks"},"content":"The temperature feedback is decomposed into Planck and lapse rate feedbacks, but first, we can calculate the change in TOA LW radiation resulting from changes in surface (ts) and air (ta) temperature. The first step is calculating the changes in surface and air temperature:\n\ndts = pert_state.ts - ctrl_state.ts\ndta = pert_state.ta - ctrl_state.ta\n\nThen the change in TOA radiation using the kernels:\\Delta R_{T_\\mathrm{s}}=K_{T_\\mathrm{s}}\\cdot\\Delta T_\\mathrm{s}\n\nAnd for feedbacks that involve functions of pressure, we sum over the pressure levels:\\Delta R_T=\\sum_p K_T(p)\\cdot\\Delta T(p)\n\ndLW_ts = regr_kernels.lw_ts * dts\ndLW_ts_clr = regr_kernels.lwclr_ts * dts\n\ndLW_ta = (regr_kernels.lw_t * tropo_mask(dta)).sum(dim='plev', skipna=True)\ndLW_ta_clr = (regr_kernels.lwclr_t * tropo_mask(dta)).sum(dim='plev', skipna=True)\n\ndLW_ts.mean(dim='month').plot()\n\ndLW_ta.mean(dim='month').plot()\n\nThe full temperature feedback is the sum of these, normalized by the change in GMST:\\lambda_T=\\frac{\\Delta R_{T_\\mathrm{s}}+\\Delta R_T}{\\Delta T_\\mathrm{s}}\n\nt_feedback = (dLW_ta + dLW_ts)/dgmst\n\nt_feedback.mean(dim='month').plot()\n\nFor the annual and global average, we get about -4.3 W m-2 K-1:\n\nglobal_average(t_feedback.mean(dim='month')).load()\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#temperature","position":29},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Planck","lvl3":"Temperature","lvl2":"Calculating feedbacks"},"type":"lvl4","url":"/notebooks/feedback-analysis/manual-calc#planck","position":30},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Planck","lvl3":"Temperature","lvl2":"Calculating feedbacks"},"content":"There are two components to the Planck feedback:\n\nThe change in TOA radiation due to the surface warming (calculated in the previous section)\n\nThe change in TOA radiation due to a vertically-uniform warming\n\nWe assume a vertically-uniform warming based on the surface temperature. To do this, project the surface warming into the vertical. One way to do this with Xarray is:\n\ndts_3d = dts.expand_dims(dim={'plev': dta.plev})\n\nCheck the vertical profile:\n\ndts_3d.mean(dim=['month', 'lon']).plot(yincrease=False)\n\ndLW_dts_3d = (regr_kernels.lw_t * tropo_mask(dts_3d)).sum(dim='plev', skipna=True)\n\nThe sum of the two components divided by the change in GMST is the Planck feedback:\n\nplanck_feedback = (dLW_ts + dLW_dts_3d)/dgmst\n\nplanck_feedback.mean(dim='month').plot()\n\nAnnual and global average: -3.6 W m-2 K-1.\n\nglobal_average(planck_feedback.mean(dim='month')).load()\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#planck","position":31},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Lapse rate","lvl3":"Temperature","lvl2":"Calculating feedbacks"},"type":"lvl4","url":"/notebooks/feedback-analysis/manual-calc#lapse-rate","position":32},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Lapse rate","lvl3":"Temperature","lvl2":"Calculating feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#lapse-rate","position":33},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Water vapor","lvl2":"Calculating feedbacks"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#water-vapor","position":34},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Water vapor","lvl2":"Calculating feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#water-vapor","position":35},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Shortwave water vapor","lvl3":"Water vapor","lvl2":"Calculating feedbacks"},"type":"lvl4","url":"/notebooks/feedback-analysis/manual-calc#shortwave-water-vapor","position":36},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Shortwave water vapor","lvl3":"Water vapor","lvl2":"Calculating feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#shortwave-water-vapor","position":37},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Longwave water vapor","lvl3":"Water vapor","lvl2":"Calculating feedbacks"},"type":"lvl4","url":"/notebooks/feedback-analysis/manual-calc#longwave-water-vapor","position":38},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Longwave water vapor","lvl3":"Water vapor","lvl2":"Calculating feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#longwave-water-vapor","position":39},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Cloud","lvl2":"Calculating feedbacks"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#cloud","position":40},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Cloud","lvl2":"Calculating feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#cloud","position":41},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Cloud radiative effect (CRE)","lvl3":"Cloud","lvl2":"Calculating feedbacks"},"type":"lvl4","url":"/notebooks/feedback-analysis/manual-calc#cloud-radiative-effect-cre","position":42},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Cloud radiative effect (CRE)","lvl3":"Cloud","lvl2":"Calculating feedbacks"},"content":"\n\nctrl_SWCRE = (-ctrl_state.rsut + ctrl_state.rsutcs)\npert_SWCRE = (-pert_state.rsut + pert_state.rsutcs)\ndSWCRE = pert_SWCRE - ctrl_SWCRE\n\ndSWCRE.mean(dim='month').plot()\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#cloud-radiative-effect-cre","position":43},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Cloud feedback adjustments","lvl3":"Cloud","lvl2":"Calculating feedbacks"},"type":"lvl4","url":"/notebooks/feedback-analysis/manual-calc#cloud-feedback-adjustments","position":44},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl4":"Cloud feedback adjustments","lvl3":"Cloud","lvl2":"Calculating feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#cloud-feedback-adjustments","position":45},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Net","lvl2":"Calculating feedbacks"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#net","position":46},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"Net","lvl2":"Calculating feedbacks"},"content":"\n\n\n\n\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#net","position":47},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Summary"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#summary","position":48},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Summary"},"content":"","type":"content","url":"/notebooks/feedback-analysis/manual-calc#summary","position":49},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"What’s next?","lvl2":"Summary"},"type":"lvl3","url":"/notebooks/feedback-analysis/manual-calc#whats-next","position":50},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl3":"What’s next?","lvl2":"Summary"},"content":"\n\n","type":"content","url":"/notebooks/feedback-analysis/manual-calc#whats-next","position":51},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Resources and references"},"type":"lvl2","url":"/notebooks/feedback-analysis/manual-calc#resources-and-references","position":52},{"hierarchy":{"lvl1":"Feedback analysis using radiative kernels","lvl2":"Resources and references"},"content":"","type":"content","url":"/notebooks/feedback-analysis/manual-calc#resources-and-references","position":53},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks"},"type":"lvl1","url":"/notebooks/foundations/energy-balance-model","position":0},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model","position":1},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks"},"type":"lvl1","url":"/notebooks/foundations/energy-balance-model#energy-balance-model-and-feedbacks","position":2},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks"},"content":"\n\n\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#energy-balance-model-and-feedbacks","position":3},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#overview","position":4},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Overview"},"content":"This tutorial focuses on introducing the fundamental concepts of the energy balance model and radiative feedback, and establish notations and definitions for the rest of the cookbook.\n\nThe following topics will be covered in this tutorial:\n\nThe Energy Balance Model\n\nWhat is Radative Feedback\n\nMethods to Calculate Radiative Feedback\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#overview","position":5},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#prerequisites","position":6},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Prerequisites"},"content":"Concepts\n\nImportance\n\nNotes\n\nTBD\n\nNecessary\n\n\n\nTime to learn: >30 minutes\n\n\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#prerequisites","position":7},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Radiative Budget Analysis"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#radiative-budget-analysis","position":8},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Radiative Budget Analysis"},"content":"\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#radiative-budget-analysis","position":9},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"The Energy Balance Model"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#the-energy-balance-model","position":10},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"The Energy Balance Model"},"content":"\n\nSOS on font settings and adding links\n\nInfoFor a more comprehensive material about the energy balance model, pokearounds on the energy balance model, and introductions to simpler energy balance models like the two-box model, feel free to check out other resources like the [Climate Laboratory](https://brian-rose.github.io/ClimateLaboratoryBook/courseware/zero-dim-ebm.html) and\n\n*Chapter 2 - Global Energy Balance* from *Global Physical Climatology* {cite:p}`hartmann:ch2:2016a`.\n\nImagine a scenario where we start off with an energy-balanced Earth, where at top of atmosphere (TOA) flux towards Earth’s surface is equal to the TOA flux going out to space.\n\nNow if we double the concentration levels of carbon dioxide (CO_{2}) in the atmopshere - the surface temperature is going to increase through the greenhouse-effect instantaneously. However, climate processes can amplify or dampen the climate response. For example, the surface may radiate more out to space due to the surface warming, which would dampen the overall warming. On the other hand, there may be more water vapor to absorb the outgoing longwave radiation in the atmosphere due to the increased rate of evaporation from the warming, and thus amplifies the warming.\n\nTo put this into equations, let R be the radiative imbalance, S_o as the solar insolation, α as the planetary albedo, and together, S_o/4 (1-\\alpha) represents the absorbed solar radiation. OLR is the outgoing longwave radiation. At equilibrium where the incoming flux equals to the outgoing flux, R = 0.R = F_{in} - F_{out}R = S_o/4 (1-\\alpha) - OLR\n\nIn this case, the addition of CO_{2} induces a change in the radiative flux at the top of the atmosphere, and is quantified as the raditive forcing F. The climate responds to the radiative imbalance by changing the global mean temperature. We can relate the global mean surface temperature to the external perturbation and the radiative imbalance at TOA by the following equation:R = F + \\lambda T\n\nwhere R is the net TOA flux anomaly (positive downward), F is the effective radiative forcing, λ is the feedback parameter, also known as the climate response parameter, and T is the global mean surface temperature anomaly, relative to the temperature at equilibrium.\n\nOther typical conventions of the same values used within the community:\n\nR = N (e.g. \n\nGregory et al. (2004));\n\nR = H (e.g. \n\nDessler & Zelinka (2015));\n\nF = ΔQ  (e.g. \n\n);\n\nλ = α (e.g. \n\nGregory et al. (2004));\n\nSOS on font settings and adding links and splitting into paragraphs\n\nInfoAs you explore the feedback-forcing space, you may stumble upon the term climate sensitivity, which is the relationship between the magnitude of the climate change response and the doubling-CO2 forcing with the unit in Kelvin. \\begin{equation*} ECS = \\frac{1}{\\lambda} \\end{equation*} This metric tells how much the climate system would warm per unit of radiative forcing (typically doubling of $CO_{2}$. Ch.10 Climate Sensitivity and Feedback Mechanisms in the Global Physical Climatology {cite:p}`hartmann:ch10:2016a` and the chapter \"Climate Feedbacks\" in the Encyclopedia of Atmospheric Sciences {cite:p}`dessler:2015a` provide a holistic overview on the topic, and {cite:t}`sherwood:2020a` would provide the most up-to-date understanding on equilibrium climate sensitivity (ECS) within the community.\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#the-energy-balance-model","position":11},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#radiative-feedback-lambda","position":12},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Radiative Feedback (\\lambda)"},"content":"","type":"content","url":"/notebooks/foundations/energy-balance-model#radiative-feedback-lambda","position":13},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"So, what is a feedback and why does it matter?","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#so-what-is-a-feedback-and-why-does-it-matter","position":14},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"So, what is a feedback and why does it matter?","lvl2":"Radiative Feedback (\\lambda)"},"content":"Feedback is the climate system response to an external radiative forcing \n\nHansen et al., 1984, \n\n. When the global mean surface temperature changes, climate variables may change as well. These climate variable changes would influence the Earth’s radiation balance and contribute to the radiative response.\n\nNote that feedback is different from the radiative response, where the former has the unit of Wm^{-2} K^{-1} and is quantified by the feedback parameter λ, while the latter  has the unit of Wm^{-2}, quantified by \\lambda T.\n\nLet x be a vector representing an ensemble of climate variables like atmospheric temperature, water vapor, surface ice and snow. The formal definition of the system’s total feedback parameter, which is the strength of the climate system’s net feedback, is as follow \n\n:\\lambda = \\frac{\\partial R}{\\partial T_{s}} = \\sum^{x} \\frac{\\partial R}{\\partial x} \\frac{\\partial x}{\\partial T_{s}} + \\sum \\sum \\frac{\\partial ^{2}R}{\\partial x \\partial y} \\frac{\\partial x \\partial y}{\\partial T_{s}^{2}} + ...\n\n(UNDER CONSTRUCTION: source needed for why do this+populate explanation on equation - Dessler and Zelinka 2015 explains it more intuitively, but require conversion from g to λ)\n\nThe net feedback parameter is reduced to the first order \n\nSherwood et al., 2020:\\lambda = \\sum^{x}_{i}\\lambda_{i} = \\sum^{x} \\frac{\\partial R}{\\partial x} \\frac{\\partial x}{\\partial T_{s}}\n\nA positive feedback (\\lambda > 0) would make the forced response bigger while a negative feedback (\\lambda < 0) stabilizes the forced response. In the following subsections, we will discuss each feedback mechanism in detail and how the mechanism would feed back into enhancing or muting the response.\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#so-what-is-a-feedback-and-why-does-it-matter","position":15},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"Types of Feedbacks","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#types-of-feedbacks","position":16},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"Types of Feedbacks","lvl2":"Radiative Feedback (\\lambda)"},"content":"Feedbacks below are listed following \n\nSherwood et al., 2020 and are limited to feedbacks that directly affect the top-of-the-atmosphere (TOA) radiation budget, and respond to surface temperature mostly through physical processes (Bony et al. 2006):\n\nPlanck Feedback\n\nSurface Albedo Feedback\n\nWater Vapor Feedback\n\nLapse Rate Feedback\n\nCloud Feedback\n\nThe list above is not exhaustive. Feedbacks like the carbon cycle feedback are not included due to the carbon dioxide level being prescribed for the experimental set-up in Sherwood et al. (2020). Other feedbacks like the atmospheric ozone feedback and stratospheric feedback are not included as they are not normally quantified (Sherwood et al. 2020).\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#types-of-feedbacks","position":17},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"1. Planck “Feedback” (Negative under warming)","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#id-1-planck-feedback-negative-under-warming","position":18},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"1. Planck “Feedback” (Negative under warming)","lvl2":"Radiative Feedback (\\lambda)"},"content":"Planck feedback is the extra longwave (LW) emission to space from a vertically uniform warming of the surface and atmosphere, while holding all climate variable unchanged.\n\nThe Planck feedback can be explained by the Stefan-Boltzmann law, which states that the total energy radiated per unit surface area per unit time is directly proportional to the fourth power of the black body’s temperature.F = \\sigma T^4\n\n, where σ is the Stefan-Boltzmann constant (5.67*10^{-8}   Wm^{-2}K^{-4}). If everything else is held constant, we can calculate the rate of change of TOA flux due to the change in surface warming by taking the derivative of the Stefan-Boltzmann law. Taking the Earth’s average outgoing longwave radiation as 240 Wm^{−2} (e.g., \n\nLoeb et al. (2018)) for the global effective emission temperature T_{e} as 255K, and substitute it as follow:-4\\sigma T_e^3 \\approx - 3.76 Wm^{-2}K^{-1}\n\nIf we include the planetary emissivity ε, we will get \\lambda_{Planck} \\approx -3.3Wm^{-2}K^{-1}, which is close to observations \n\nDessler, 2013 and global climate models \n\nCaldwell et al., 2016).\n\nSimply put, the more you heat, the more LW radiation go out.\n\n[TO BE POLISHED]\n*Kernel related: structural uncertainty in Planck feedback arises from differences in spatial pattern of surface warming and climatological distribution fo clodus and water vapor that determines planetary emissivity - affects radiative temperature kernel \n\nSherwood et al., 2020.\n\nTypes of radiative kernels there are: sfc albedo, air temp (vert.varying) , surf temp, LW water vapor kernel, SW water vapor kernel\n\nExtended ReadPlanck feedback not necessarily accurately represented in climate models due to lack of stratospheric warming {cite:ps}`cronin:2023a`\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#id-1-planck-feedback-negative-under-warming","position":19},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"2. Surface Albedo Feedback (Positive under warming)","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#id-2-surface-albedo-feedback-positive-under-warming","position":20},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"2. Surface Albedo Feedback (Positive under warming)","lvl2":"Radiative Feedback (\\lambda)"},"content":"\n\nThe surface albedo feedback, also known as the ice-albedo feedback, pertains primarily to the high latitudes, where snow and ice are present. Snow and ice have very high albedo (reflectivity). Snow has the highest albedo (up to 90%), while sea ice albedo ranges from 50-70%. Melt ponds further reduce the albedo, and as ice recedes, open ocean can be as low as 6%.\n\nThis process consitutes a positive feedback loop: melt of snow and ice decreases albedo, causing additional radiation absorption. More absorption causes temperatures to rise, which further contributes to melt, restarting the cycle.\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#id-2-surface-albedo-feedback-positive-under-warming","position":21},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"3. Water Vapor Feedback: (Positive under warming)","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#id-3-water-vapor-feedback-positive-under-warming","position":22},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"3. Water Vapor Feedback: (Positive under warming)","lvl2":"Radiative Feedback (\\lambda)"},"content":"[UNDER CONSTRUCTION]\n\nWater vapor feedback and lapse rate feedback are commonly discussed together as they are both dependent on the how much water vapor is present in the atmosphere.\n\nWater vapor feedback is defined as the change in TOA net flux due to the increase in water vapor per degree of surface warming.\n\nWater vapor interacts with both longwave and shortwave radiation.  captures the change in outgoing LW and absorbed SW radiation at TOA due to the changes in the atmospheric water vapor concentration.\n\n[insert pic of capacity of jar increases as temperature increase]\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#id-3-water-vapor-feedback-positive-under-warming","position":23},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"4. Lapse Rate Feedback (Negative under warming)","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#id-4-lapse-rate-feedback-negative-under-warming","position":24},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"4. Lapse Rate Feedback (Negative under warming)","lvl2":"Radiative Feedback (\\lambda)"},"content":"\n\nLATERRRRRR\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#id-4-lapse-rate-feedback-negative-under-warming","position":25},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"5. Cloud Feedback","lvl2":"Radiative Feedback (\\lambda)"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#id-5-cloud-feedback","position":26},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"5. Cloud Feedback","lvl2":"Radiative Feedback (\\lambda)"},"content":"\n\nThe cloud feedback mechanism is the most complex feedback discussed in this tutorial. There are several reasons for this. Clouds interact with both shortwave (SW) solar radiation and longwave (LW) terrestrial radiation and exert varying radiative effects depending on their properties (cloud type, height, optical depth, liquid and ice water content, particule sizes, etc).\n\nGenerally, high-level clouds do not interact much with solar radiation but easily absorb terrestrial radiation, preventing its loss to space and contribute to warming. Low-level clouds reflect solar radiation during the day, which contributes to cooling, but absorb some terrestrial radiation,  contributing to warming (particularly at night!). Thus, high-level clouds tend to exert a positive climate feedback, while low-level clouds tend to exert an overall negative climate feedback.\n\n\n\n\nCredit: Paulo Ceppi\n\nCloud feedbacks produced by climate models tend to vary greatly, which is largely attributed to the issue of scale in modern GCMs (ESMs??). GCMs are at resolutions much too large to resolve the microscopic processes dictating the formation and properties of clouds.\nCloud formation and lifetime is additionally complex as it is highly dependent on atmospheric aerosol loading, which is another complex discussion. Of course, clouds are also intrinsically tied to atmospheric water vapor content.\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#id-5-cloud-feedback","position":27},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Methods to Calculate Raditaive Feedback"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#methods-to-calculate-raditaive-feedback","position":28},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Methods to Calculate Raditaive Feedback"},"content":"\n\nTypically radiative feedback are calculated with global climate models. :O\n\nPRP method\n\nWorkin on it >:)\n\nSuccessWe got this done after all!\n\nWarningBe careful!\n\nDangerScary stuff be here.\n\nWe also suggest checking out Jupyter Book’s \n\nbrief demonstration on adding cell tags to your cells in Jupyter Notebook, Lab, or manually. Using these cell tags can allow you to \n\ncustomize how your code content is displayed and even \n\ndemonstrate errors without altogether crashing our loyal army of machines!\n\n\n\n","type":"content","url":"/notebooks/foundations/energy-balance-model#methods-to-calculate-raditaive-feedback","position":29},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Summary"},"type":"lvl2","url":"/notebooks/foundations/energy-balance-model#summary","position":30},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl2":"Summary"},"content":"Add one final --- marking the end of your body of content, and then conclude with a brief single paragraph summarizing at a high level the key pieces that were learned and how they tied to your objectives. Look to reiterate what the most important takeaways were.","type":"content","url":"/notebooks/foundations/energy-balance-model#summary","position":31},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"What’s next?","lvl2":"Summary"},"type":"lvl3","url":"/notebooks/foundations/energy-balance-model#whats-next","position":32},{"hierarchy":{"lvl1":"Energy Balance Model and Feedbacks","lvl3":"What’s next?","lvl2":"Summary"},"content":"Let Jupyter book tie this to the next (sequential) piece of content that people could move on to down below and in the sidebar. However, if this page uniquely enables your reader to tackle other nonsequential concepts throughout this book, or even external content, link to it here!\n\nReferences:\n\nBony et al. 2006\n\nZelinka et al. 2020\n\nSherwood et al. 2020\n\nDessler and Zelinka 2015 (Encyclopedia of Atmospheric Sciences)\n\nHartmann 2016 (Global Physical Climatology)\n\nHansen et al. 1984\n\nGregory et al. 2004\n\nMore to come","type":"content","url":"/notebooks/foundations/energy-balance-model#whats-next","position":33},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks"},"type":"lvl1","url":"/notebooks/foundations/theory-rad-feedback","position":0},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks"},"content":"\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback","position":1},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/foundations/theory-rad-feedback#overview","position":2},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Overview"},"content":"This tutorial explains the ways to calculate radiative feedbacks, the math behind the calculations, and their respective advantages and limitations.\n\nAfter this tutorial, you will know:\n\nwhat radiative kernels are;\n\nthe calculations of radiative feedback with radiative kernels; and\n\nthe advantages, limitations, assumptions and uncertainties of the radiative kernel method.\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#overview","position":3},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/foundations/theory-rad-feedback#prerequisites","position":4},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Prerequisites"},"content":"The following concepts will be referred to or explicitly used in this tutorial.\n\nConcepts\n\nImportance\n\nNotes\n\nCalculus\n\nNecessary\n\nwe love math\n\nTime to learn: 24-7 :)\n\n\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#prerequisites","position":5},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Methods to Calculate Raditaive Feedback"},"type":"lvl2","url":"/notebooks/foundations/theory-rad-feedback#methods-to-calculate-raditaive-feedback","position":6},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Methods to Calculate Raditaive Feedback"},"content":"\n\nTypically radiative feedback are calculated with global climate models.\n\nPartial Radiative Perturbation (PRP) method (Wetherald and Manabe 1988)\n\nCloud Radiative Forcing (CRF) approach (Cess et al. 1990, 1996)\n\nOnline Feedback Suppression Approach (Hall and Manabe 1999, Schneider et al. 1999)\n\nRadiative Kernel Methods (Soden et al. 2008)\n\nEvaluates partial derivatives of model TOA\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#methods-to-calculate-raditaive-feedback","position":7},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl2","url":"/notebooks/foundations/theory-rad-feedback#calculating-feedbacks-with-radiative-kernels","position":8},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"As of when this cookbook section is written (2024), there are a couple  radiative kernels available in the community.\n\nSoden et al. (2008) from GFDL\n\nShell et al. (2008) from CAM\n\nBlock and Mauritsen (2013) from Max Planck Institute Earth System Model (MPI-ESM-LR)\n\nPendergrass, Conley, and Vitt (2018) from NSF-NCAR Community Atmosphere Model 5 (CESM-CAM5)\n\nSmith et al. (2018) from 11 models in PDRMIP\n\nWe will discuss the radiative kernel method in details based off of kernels discussed in Soden et al. 2008.\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#calculating-feedbacks-with-radiative-kernels","position":9},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Planck Feedback: Temperature Kernel","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl3","url":"/notebooks/foundations/theory-rad-feedback#planck-feedback-temperature-kernel","position":10},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Planck Feedback: Temperature Kernel","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#planck-feedback-temperature-kernel","position":11},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Water Vapor and Lapse Rate Feedback: Water Vapor Kernel","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl3","url":"/notebooks/foundations/theory-rad-feedback#water-vapor-and-lapse-rate-feedback-water-vapor-kernel","position":12},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Water Vapor and Lapse Rate Feedback: Water Vapor Kernel","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#water-vapor-and-lapse-rate-feedback-water-vapor-kernel","position":13},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Albedo Feedback: Surface Albedo Kernel","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl3","url":"/notebooks/foundations/theory-rad-feedback#albedo-feedback-surface-albedo-kernel","position":14},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Albedo Feedback: Surface Albedo Kernel","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#albedo-feedback-surface-albedo-kernel","position":15},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Cloud Feedback: Cloud Kernel...?","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl3","url":"/notebooks/foundations/theory-rad-feedback#cloud-feedback-cloud-kernel","position":16},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Cloud Feedback: Cloud Kernel...?","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"Clouds are generally assumed to be the largest source of uncertainty in the global climate response to radiative forcing. Cloud formation and lifetime are dictated by complex processes occurring at micro and macro-scale, and their radiative properties depend on the cloud type and optical properties. The nonlinear radiative effects of clouds are thus not suitable for direct calculation by kernels.\n\nSeveral methods have evolved to estimate cloud feedbacks.\n\n\nSoden and Held (2006) computed the cloud feedback as the residual difference between the effective climate sensitivity and all other feedbacks.\n\nSoden et al. (2008) calculated cloud feedback as a sum of the change in cloud radiative forcing and the difference between the full-sky and clear-sky kernels. However,\n\nHeld and Shell (2012) have pointed out that the decomposition of radiative feedbacks into the mechanisms discussed herein is rather arbitrary and proposed the use of tropospheric relative humidity\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#cloud-feedback-cloud-kernel","position":17},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl4":"Adjustment vs. residual method","lvl3":"Cloud Feedback: Cloud Kernel...?","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl4","url":"/notebooks/foundations/theory-rad-feedback#adjustment-vs-residual-method","position":18},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl4":"Adjustment vs. residual method","lvl3":"Cloud Feedback: Cloud Kernel...?","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#adjustment-vs-residual-method","position":19},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Relative Humidity Framework Kernels","lvl2":"Calculating Feedbacks with Radiative Kernels"},"type":"lvl3","url":"/notebooks/foundations/theory-rad-feedback#relative-humidity-framework-kernels","position":20},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"Relative Humidity Framework Kernels","lvl2":"Calculating Feedbacks with Radiative Kernels"},"content":"\n\n\n\n","type":"content","url":"/notebooks/foundations/theory-rad-feedback#relative-humidity-framework-kernels","position":21},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Summary"},"type":"lvl2","url":"/notebooks/foundations/theory-rad-feedback#summary","position":22},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl2":"Summary"},"content":"Yay you made it!","type":"content","url":"/notebooks/foundations/theory-rad-feedback#summary","position":23},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"What’s next?","lvl2":"Summary"},"type":"lvl3","url":"/notebooks/foundations/theory-rad-feedback#whats-next","position":24},{"hierarchy":{"lvl1":"Mathematical Theory of Radiative Feedbacks","lvl3":"What’s next?","lvl2":"Summary"},"content":"Now that you have learned all the foundations about the energy balance, the feedback-forcing framework, how to calculate and the reasons behind the calculations of feedbacks with the use of radiative kernels, let’s get crackin! (is this old school?)","type":"content","url":"/notebooks/foundations/theory-rad-feedback#whats-next","position":25},{"hierarchy":{"lvl1":"How to Cite This Cookbook"},"type":"lvl1","url":"/notebooks/how-to-cite","position":0},{"hierarchy":{"lvl1":"How to Cite This Cookbook"},"content":"The material in this Project Pythia Cookbook is licensed for free and open consumption and reuse. All code is served under \n\nApache 2.0, while all non-code content is licensed under \n\nCreative Commons BY 4.0 (CC BY 4.0). Effectively, this means you are free to share and adapt this material so long as you give appropriate credit to the Cookbook authors and the Project Pythia community.\n\nThe source code for the book is \n\nreleased on GitHub and archived on Zenodo. This DOI will always resolve to the latest release of the book source:\n\n","type":"content","url":"/notebooks/how-to-cite","position":1},{"hierarchy":{"lvl1":"Feedbacks with ClimKern"},"type":"lvl1","url":"/notebooks/simplified-calc/climkern-calc","position":0},{"hierarchy":{"lvl1":"Feedbacks with ClimKern"},"content":"\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc","position":1},{"hierarchy":{"lvl1":"Feedbacks with ClimKern"},"type":"lvl1","url":"/notebooks/simplified-calc/climkern-calc#feedbacks-with-climkern","position":2},{"hierarchy":{"lvl1":"Feedbacks with ClimKern"},"content":"\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#feedbacks-with-climkern","position":3},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/simplified-calc/climkern-calc#overview","position":4},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Overview"},"content":"While it is good to know how to manually calculate radiative feedbacks, it is also time-consuming to constantly recreate the code. Here, we will use a new Python package called ClimKern that offers functions to calculate radiative feedbacks from climate model or reanalysis output. The advantages of using ClimKern go beyond making it simpler—it standardizes the methods and assumptions that go into these sometimes complicated calculations. We will use CMIP6 output in this notebook. You will learn how to:\n\nDownload CMIP6 data from Pangeo’s space on Google Cloud.\n\nObtain a radiative kernel from the ClimKern repository.\n\nCalculate the surface albedo, temperature, and water vapor feedbacks.\n\nCompute the cloud feedbacks using the two main methods: residual and adjustment.\n\nQuantify stratospheric feedbacks.\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#overview","position":5},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/simplified-calc/climkern-calc#prerequisites","position":6},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Prerequisites"},"content":"Concepts\n\nImportance\n\nNotes\n\nIntro to Xarray\n\nNecessary\n\n\n\nIntro to Cartopy\n\nNecessary\n\n\n\nIntro to Matplotlib\n\nHelpful\n\n\n\nLoading CMIP6 Data with Intake-ESM\n\nHelpful\n\n\n\nTime to learn: 20 minutes\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#prerequisites","position":7},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Imports"},"type":"lvl2","url":"/notebooks/simplified-calc/climkern-calc#imports","position":8},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Imports"},"content":"\n\nimport climkern as ck\nimport intake\nimport matplotlib.pyplot as plt\nimport s3fs\nimport fsspec\nimport xarray as xr\nimport glob\nimport importlib.util\nimport os\nimport cartopy.crs as ccrs\n\n%matplotlib inline\nplt.rcParams[\"figure.dpi\"] = 100\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#imports","position":9},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Download the kernel"},"type":"lvl2","url":"/notebooks/simplified-calc/climkern-calc#download-the-kernel","position":10},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Download the kernel"},"content":"\n\nNormally, when ClimKern is installed, the user needs to download data on the command\nline from the Zenodo repository. However, we now have the data on Jetstream2, so\nwe can download it from there and save it in our package repository.\n\nFuture updateFuture versions of ClimKern will be able to pull the kernel from Jetstream2 without storing locally.\n\nFirst, set the URL and path to point to ClimKern. Also, specify which kernel you want.\n\nURL = \"https://js2.jetstream-cloud.org:8001/\" # URL for jetstream access\npath = f\"pythia/ClimKern\" # Location of ClimKern\nkernel = \"ERA5\"\n\nNext, read in the data from Jetstream2\n\n# Read in data\n# Set up access to jetstream2\nfs = fsspec.filesystem(\"s3\", anon=True, client_kwargs=dict(endpoint_url=URL))\npattern = f\"s3://{path}/kernels/\"+kernel+f\"/TOA*.nc\"\n\n# Grab the data\nfiles = sorted(fs.glob(pattern))\n\n# Open file and make it Xarray Dataset\nkern = xr.open_dataset(fs.open(files[0]))\n\n# Save path for later\npath_out = files[0].split(kernel+\"/\",1)[1]\n\nTo save this data in ClimKern’s directory, we have to figure out where it is on the\nmachine. After that, we will go ahead and save out the kernel as a netCDF in\nClimKern’s local data directory.\n\n# Get the package location\nspec = importlib.util.find_spec(\"climkern\")\npackage_dir = os.path.dirname(spec.origin)\n\n# print(f\"The package directory is: {package_dir}\")\n\n# Define the path where you want to save the netCDF file within the package directory\nnetcdf_path = os.path.join(package_dir,\"data/kernels\",kernel,path_out)\n\n# Ensure the directory exists\nos.makedirs(os.path.dirname(netcdf_path), exist_ok=True)\n\n# Save the dataset as a netCDF file\nkern.to_netcdf(netcdf_path)\n\nNow, let’s just make sure we can retrieve the kernel.\n\nck.util.get_kern(kernel)\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#download-the-kernel","position":11},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Prepare the CMIP6 Data"},"type":"lvl2","url":"/notebooks/simplified-calc/climkern-calc#prepare-the-cmip6-data","position":12},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Prepare the CMIP6 Data"},"content":"\n\nTo start, we will need some CMIP6 data to calculate feedbacks. We will use the\npreindustrial control and 4×CO2 experiments from just one model (CESM2).\n\n# Make a list of variables and experiments we need\nvar_list = [\"rsds\",\"rsus\",\"ta\",\"ts\",\"ps\",\"hus\"]\nexp_list = [\"piControl\",\"abrupt-4xCO2\"]\n\n# Specify data location, open it\ncat_url = \"https://storage.googleapis.com/cmip6/pangeo-cmip6.json\"\ncol = intake.open_esm_datastore(cat_url)\n\n# Create a catalog of matching simulations\ncat = col.search(experiment_id=exp_list,source_id=\"CESM2\",variable_id=var_list,\n                table_id=\"Amon\")\n\n# Convert to a dictionary of Xarray Datasets\nds_dict = cat.to_dataset_dict(zarr_kwargs={'consolidated': True})\n\nThe data, especially the preindustrial control simulation that will serve as our\ncontrol climate, is huge. We are going to only use the last 50 years of the control\nand last 30 years of the abrupt 4×CO2 simulation. There are a few extra coordinates\nand/or dimensions we don’t need, hence the squeeze().\n\n# Our control simulation\nctrl = ds_dict[\"CMIP.NCAR.CESM2.piControl.Amon.gn\"].isel(\n    time=slice(-600,None)).squeeze().chunk({\"plev\":1,\"time\":-1})\n\n# The increase CO2 aka \"perturbed\" simulation\npert = ds_dict[\"CMIP.NCAR.CESM2.abrupt-4xCO2.Amon.gn\"].isel(\n    time=slice(-360,None)).squeeze().chunk({\"plev\":1,\"time\":-1})\n\nTo save a little diskspace because ClimKern still isn’t dask compatible yet,\nlet’s make our control climatology ahead of time.\n\nctrl = ctrl.groupby(ctrl.time.dt.month).mean(dim=\"time\").rename({\"month\":\"time\"})\npert = pert.groupby(pert.time.dt.month).mean(dim=\"time\").rename({\"month\":\"time\"})\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#prepare-the-cmip6-data","position":13},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Feedback calculations"},"type":"lvl2","url":"/notebooks/simplified-calc/climkern-calc#feedback-calculations","position":14},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl2":"Feedback calculations"},"content":"\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#feedback-calculations","position":15},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Calculate surface temperature change","lvl2":"Feedback calculations"},"type":"lvl3","url":"/notebooks/simplified-calc/climkern-calc#calculate-surface-temperature-change","position":16},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Calculate surface temperature change","lvl2":"Feedback calculations"},"content":"\n\nClimKern outputs feedbacks as radiative perturbations at the TOA (because there are multiple ways to quantify feedbacks). One of the most common ways is to normalize by the change in the surface temperature, which puts values in “true” feedback units of W/m2/K. For that, we start by calculating the change in the surface temperature in our CESM2 experiment.\n\n# Take difference between pert and ctrl ts fields\nΔts = pert.ts - ctrl.ts\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#calculate-surface-temperature-change","position":17},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Surface albedo feedback","lvl2":"Feedback calculations"},"type":"lvl3","url":"/notebooks/simplified-calc/climkern-calc#surface-albedo-feedback","position":18},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Surface albedo feedback","lvl2":"Feedback calculations"},"content":"\n\nPerhaps the simplest of the radiative feedbacks to calculate is the surface albedo\nfeedback because it requires only two variables and is a 3-dimensional field (no height\ncoordinate). The variables we will use are as follows:\n\nVariable name\n\nDescription\n\nUnits\n\nrsus\n\nThe upwelling shortwave radiation at the surface\n\nW/m2\n\nrsds\n\nThe downwelling shortwave radiation at the surface\n\nW/m2\n\nThe \n\ncalc_alb_feedback() function is straightforward. Be sure to include our kernel name\nin the arguments.\n\nalb = ck.calc_alb_feedback(\n    ctrl.rsus,ctrl.rsds,pert.rsus,pert.rsds,kern=\"ERA5\"\n)\n\nLet’s see what the resulting Dataarray looks like.\n\nalb\n\nFinally, let’s plot the time average surface albedo feedback on a map, first as just the perturbation.\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot surface albedo feedback & add coastlines\nalb.mean(dim=\"time\").plot(ax=ax,transform=ccrs.PlateCarree(),\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged Surface Albedo Feedback\")\n\nplt.show()\n\nNow normalized by the surface temperature change...\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot surface albedo feedback & add coastlines\n(alb.mean(dim=\"time\")/Δts.mean(dim=\"time\")).plot(ax=ax,transform=ccrs.PlateCarree(),\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$/K\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged Surface Albedo Feedback\")\n\nplt.show()\n\nAs one might expect, the greatest radiative change at the TOA from the surface albedo feedback is near the poles where there is melting sea ice and snow.\n\nLet’s end by calculating the global average. ClimKern comes with a \n\nspat_avg() function.\n\n# Output the time-averaged global surface albedo feedback\noutput = \"The global average surface albedo feedback is {value:.2f} W/m\\u00b2/K.\"\nprint(output.format(value=float(ck.spat_avg((alb.mean(dim=\"time\")/Δts.mean(dim=\"time\")\n                                         ).expand_dims(\"time\")))))\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#surface-albedo-feedback","position":19},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Planck and lapse rate feedbacks","lvl2":"Feedback calculations"},"type":"lvl3","url":"/notebooks/simplified-calc/climkern-calc#planck-and-lapse-rate-feedbacks","position":20},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Planck and lapse rate feedbacks","lvl2":"Feedback calculations"},"content":"\n\nAs a reminder, the total tropospheric temperature feedback is often decomposed into a distict Planck and lapse rate feedback. ClimKern has a single function that produces both feedbacks simultaneously called \n\ncalc_T_feedbacks(). The variables we need this time are:\n\nVariable name\n\nDescription\n\nUnits\n\nNotes\n\nta\n\nThe 4-dimensional air temperature\n\nK\n\n\n\nts\n\nThe 3-dimensional surface skin temperature\n\nK\n\n\n\nps\n\nThe 3-dimensional surface pressure\n\nPa, mb, or hPa\n\n\n\ntrop_p\n\nThe 3-dimensional tropopause height\n\nPa, mb, or hPa\n\nOptional\n\nCMIP6 output rarely contains the tropopause height, so we will create a default tropopause that decreases linearly with the cosine of latitude from 100 hPa at the Equator to 300 hPa at the poles.\n\n# Use ClimKern's \"hidden\" make_tropo function\npert[\"trop_p\"] = ck.util.make_tropo(pert.ps)\npert.trop_p.attrs[\"units\"] = \"Pa\"\n\nlr,pl = ck.calc_T_feedbacks(\n    ctrl.ta,ctrl.ts,ctrl.ps,pert.ta,pert.ts,pert.ps,pert_trop=pert.trop_p,kern=\"ERA5\"\n)\n\nSimple. Let’s see what it looks like.\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot surface albedo feedback & add coastlines\nlr.mean(dim=\"time\").plot(ax=ax,transform=ccrs.PlateCarree(),\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged Lapse Rate Feedback\")\n\nplt.show()\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot surface albedo feedback & add coastlines\n(lr.mean(dim=\"time\")/Δts.mean(dim=\"time\")).plot(ax=ax,transform=ccrs.PlateCarree(),\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$/K\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged Lapse Rate Feedback\")\n\nplt.show()\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot surface albedo feedback & add coastlines\npl.mean(dim=\"time\").plot(ax=ax,transform=ccrs.PlateCarree(),cmap=\"Blues_r\",\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged Planck Feedback\")\n\nplt.show()\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot surface albedo feedback & add coastlines\n(pl.mean(dim=\"time\")/Δts.mean(dim=\"time\")).plot(\n    ax=ax,transform=ccrs.PlateCarree(),cmap=\"Blues_r\",\n    cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\"label\":\"W/m$^2$\"}\n)\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged Planck Feedback\")\n\nplt.show()\n\nThese results seem reasonable. The Planck feedback is often the feedback with the largest magnitude and scales nonlinearly with temperature change. The lapse rate feedback changes sign depending on the vertical structure of the atmosphere is usually positive (warming) at the poles and negative (cooling) in the tropics.\n\nLet’s get those global averages again!\n\n# Output the time-averaged global temperature feedbacks\noutput = (\"The global average lapse rate and Planck feedbacks are\"+\n          \" {lr:.2f} and {pl:.2f} W/m\\u00b2/K, respectively.\")\nprint(output.format(lr=float(ck.spat_avg((lr.mean(dim=\"time\")/Δts.mean(dim=\"time\")\n                                         ).expand_dims(\"time\"))),\n                   pl=float(ck.spat_avg((pl.mean(dim=\"time\")/Δts.mean(dim=\"time\")\n                                        ).expand_dims(\"time\")))))\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#planck-and-lapse-rate-feedbacks","position":21},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Water vapor feedbacks","lvl2":"Feedback calculations"},"type":"lvl3","url":"/notebooks/simplified-calc/climkern-calc#water-vapor-feedbacks","position":22},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Water vapor feedbacks","lvl2":"Feedback calculations"},"content":"\n\nHere we use ClimKern to calculate the longwave and shortwave water vapor feedabcks. ClimKern has a single function that produces both called \n\ncalc_q_feedbacks(). This function requires both the specific humidity and air temperature because ClimKern has to normalize the water vapor kernels to make them compatible with the specific humidity.\n\nVariable name\n\nDescription\n\nUnits\n\nNotes\n\nhus\n\nThe 4-dimensional specific humidity\n\n\\frac{g}{g} or \\frac{g}{kg}\n\n\n\nta\n\nThe 4-dimensional air temperature\n\nK\n\n\n\nps\n\nThe 3-dimensional surface pressure\n\nPa, mb, or hPa\n\n\n\ntrop_p\n\nThe 3-dimensional tropopause height\n\nPa, mb, or hPa\n\nOptional\n\nThere is one more argument we can provide called method, which is simply a number 1-4. This corresponds to whether to use a fractional approximation for logarithms, use the logarithms explicitly, or use the linear change in water vapor concentration. See \n\nhere for complete descriptions. We will use method 3 which is to use the natural logarithm of specific humidity without doing a fractional approximation.\n\nWe will use the same tropopause height as before.\n\n# Use ClimKern's water vapor feedback function\nqlw,qsw = ck.calc_q_feedbacks(\n    ctrl.hus,ctrl.ta,ctrl.ps,pert.hus,pert.ps,pert_trop=pert.trop_p,kern=\"ERA5\",\n    method=3\n)\n\nLet’s take a look, starting with the longwave.\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot the longwave water vapor feedback and add coastlines\nqlw.mean(dim=\"time\").plot(ax=ax,transform=ccrs.PlateCarree(),cmap=\"Reds\",\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged LW Water Vapor Feedback\")\n\nplt.show()\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot the longwave water vapor feedback and add coastlines\n(qlw.mean(dim=\"time\")/Δts.mean(dim=\"time\")).plot(\n    ax=ax,transform=ccrs.PlateCarree(),cmap=\"Reds\",\n    cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                 \"label\":\"W/m$^2$/K\"}\n)\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged LW Water Vapor Feedback\")\n\nplt.show()\n\nAnd now the shortwave...\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot the longwave water vapor feedback and add coastlines\nqsw.mean(dim=\"time\").plot(ax=ax,transform=ccrs.PlateCarree(),cmap=\"Reds\",\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$\"})\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged SW Water Vapor Feedback\")\n\nplt.show()\n\n# Set a few variables\nproj = ccrs.Robinson()\n\n# Create figure and axis\nfig, ax = plt.subplots(subplot_kw=dict(projection=proj),\n                       layout=\"constrained\")\n\n# Plot the longwave water vapor feedback and add coastlines\n(qsw.mean(dim=\"time\")/Δts.mean(dim=\"time\")).plot(\n    ax=ax,transform=ccrs.PlateCarree(),cmap=\"Reds\",\n                         cbar_kwargs={\"orientation\": \"horizontal\", \"shrink\": 0.7,\n                                      \"label\":\"W/m$^2$/K\"}\n)\nax.coastlines()\n\n# Add a title\nax.set_title(\"Time-averaged SW Water Vapor Feedback\")\n\nplt.show()\n\n# Output the time-averaged global surface albedo feedback\noutput = (\"The global average longwave and shortwave water vapor feedbacks are\"+\n          \" {lw:.2f} and {sw:.2f} W/m\\u00b2/K, respectively.\")\nprint(output.format(lw=float(ck.spat_avg((qlw.mean(dim=\"time\")/Δts.mean(dim=\"time\")\n                                         ).expand_dims(\"time\"))),\n                   sw=float(ck.spat_avg((qsw.mean(dim=\"time\")/Δts.mean(dim=\"time\")\n                                        ).expand_dims(\"time\")))))\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#water-vapor-feedbacks","position":23},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Cloud feedbacks","lvl2":"Feedback calculations"},"type":"lvl3","url":"/notebooks/simplified-calc/climkern-calc#cloud-feedbacks","position":24},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl3":"Cloud feedbacks","lvl2":"Feedback calculations"},"content":"\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#cloud-feedbacks","position":25},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl4":"Download radiative forcing","lvl3":"Cloud feedbacks","lvl2":"Feedback calculations"},"type":"lvl4","url":"/notebooks/simplified-calc/climkern-calc#download-radiative-forcing","position":26},{"hierarchy":{"lvl1":"Feedbacks with ClimKern","lvl4":"Download radiative forcing","lvl3":"Cloud feedbacks","lvl2":"Feedback calculations"},"content":"\n\nIt’s time for cloud feedbacks. However, like anything to do with clouds, there are some complications. You ideally need the effective radiative forcing (ERF), which is a measure of radiative imbalance imposed by CO2 in the absence of surface temperature change \n\nSmith et al., 2020. Thankfully, CESM2 radiative forcing for our scenarios is available on the Google cloud.\n\n# Specify data location, open it\ncat_url = \"https://storage.googleapis.com/cmip6/pangeo-cmip6.json\"\ncol = intake.open_esm_datastore(cat_url)\n\n# # Create a catalog of matching simulations\ncat = col.search(activity_id=\"RFMIP\",source_id=\"CESM2\",experiment_id=[\"piClim-4xCO2\",\n                                                                      \"piClim-control\"],\n                variable_id=[\"rlut\",\"rsut\",\"rsdt\"])\n\n# Convert to a dictionary of Xarray Datasets\nds_dict = cat.to_dataset_dict(zarr_kwargs={'consolidated': True})\n\n# Assign Datasets to variables\nrf_ctrl = ds_dict[\"RFMIP.NCAR.CESM2.piClim-control.Amon.gn\"]\nrf_pert = ds_dict[\"RFMIP.NCAR.CESM2.piClim-4xCO2.Amon.gn\"]\n\nInfoYour relevant information here!\n\nFeel free to copy this around and edit or play around with yourself. Some other admonitions you can put in:\n\nSuccessWe got this done after all!\n\nWarningBe careful!\n\nDangerScary stuff be here.\n\nWe also suggest checking out Jupyter Book’s \n\nbrief demonstration on adding cell tags to your cells in Jupyter Notebook, Lab, or manually. Using these cell tags can allow you to \n\ncustomize how your code content is displayed and even \n\ndemonstrate errors without altogether crashing our loyal army of machines!\n\n","type":"content","url":"/notebooks/simplified-calc/climkern-calc#download-radiative-forcing","position":27},{"hierarchy":{"lvl1":"Comparing Different Kernels"},"type":"lvl1","url":"/notebooks/simplified-calc/kernel-comparison","position":0},{"hierarchy":{"lvl1":"Comparing Different Kernels"},"content":"Let’s start here! If you can directly link to an image relevant to your notebook, such as \n\ncanonical logos, do so here at the top of your notebook. You can do this with Markdown syntax,\n\n![<image title>](http://link.com/to/image.png \"image alt text\")\n\nor edit this cell to see raw HTML img demonstration. This is preferred if you need to shrink your embedded image. Either way be sure to include alt text for any embedded images to make your content more accessible.\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison","position":1},{"hierarchy":{"lvl1":"Comparing Different Kernels"},"type":"lvl1","url":"/notebooks/simplified-calc/kernel-comparison#comparing-different-kernels","position":2},{"hierarchy":{"lvl1":"Comparing Different Kernels"},"content":"Next, title your notebook appropriately with a top-level Markdown header, #. Do not use this level header anywhere else in the notebook. Our book build process will use this title in the navbar, table of contents, etc. Keep it short, keep it descriptive. Follow this with a --- cell to visually distinguish the transition to the prerequisites section.\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#comparing-different-kernels","position":3},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#overview","position":4},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Overview"},"content":"If you have an introductory paragraph, lead with it here! Keep it short and tied to your material, then be sure to continue into the required list of topics below,\n\nThis is a numbered list of the specific topics\n\nThese should map approximately to your main sections of content\n\nOr each second-level, ##, header in your notebook\n\nKeep the size and scope of your notebook in check\n\nAnd be sure to let the reader know up front the important concepts they’ll be leaving with\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#overview","position":5},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#prerequisites","position":6},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Prerequisites"},"content":"This section was inspired by \n\nthis template of the wonderful \n\nThe Turing Way Jupyter Book.\n\nFollowing your overview, tell your reader what concepts, packages, or other background information they’ll need before learning your material. Tie this explicitly with links to other pages here in Foundations or to relevant external resources. Remove this body text, then populate the Markdown table, denoted in this cell with | vertical brackets, below, and fill out the information following. In this table, lay out prerequisite concepts by explicitly linking to other Foundations material or external resources, or describe generally helpful concepts.\n\nLabel the importance of each concept explicitly as helpful/necessary.\n\nConcepts\n\nImportance\n\nNotes\n\nIntro to Cartopy\n\nNecessary\n\n\n\nUnderstanding of NetCDF\n\nHelpful\n\nFamiliarity with metadata structure\n\nProject management\n\nHelpful\n\n\n\nTime to learn: estimate in minutes. For a rough idea, use 5 mins per subsection, 10 if longer; add these up for a total. Safer to round up and overestimate.\n\nSystem requirements:\n\nPopulate with any system, version, or non-Python software requirements if necessary\n\nOtherwise use the concepts table above and the Imports section below to describe required packages as necessary\n\nIf no extra requirements, remove the System requirements point altogether\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#prerequisites","position":7},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Imports"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#imports","position":8},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Imports"},"content":"Begin your body of content with another --- divider before continuing into this section, then remove this body text and populate the following code cell with all necessary Python imports up-front:\n\nimport sys\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#imports","position":9},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Your first content section"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#your-first-content-section","position":10},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Your first content section"},"content":"\n\nThis is where you begin your first section of material, loosely tied to your objectives stated up front. Tie together your notebook as a narrative, with interspersed Markdown text, images, and more as necessary,\n\n# as well as any and all of your code cells\nprint(\"Hello world!\")\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#your-first-content-section","position":11},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"A content subsection","lvl2":"Your first content section"},"type":"lvl3","url":"/notebooks/simplified-calc/kernel-comparison#a-content-subsection","position":12},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"A content subsection","lvl2":"Your first content section"},"content":"Divide and conquer your objectives with Markdown subsections, which will populate the helpful navbar in Jupyter Lab and here on the Jupyter Book!\n\n# some subsection code\nnew = \"helpful information\"\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#a-content-subsection","position":13},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"Another content subsection","lvl2":"Your first content section"},"type":"lvl3","url":"/notebooks/simplified-calc/kernel-comparison#another-content-subsection","position":14},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"Another content subsection","lvl2":"Your first content section"},"content":"Keep up the good work! A note, try to avoid using code comments as narrative, and instead let them only exist as brief clarifications where necessary.\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#another-content-subsection","position":15},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Your second content section"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#your-second-content-section","position":16},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Your second content section"},"content":"Here we can move on to our second objective, and we can demonstrate\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#your-second-content-section","position":17},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl3","url":"/notebooks/simplified-calc/kernel-comparison#subsection-to-the-second-section","position":18},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#subsection-to-the-second-section","position":19},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl4","url":"/notebooks/simplified-calc/kernel-comparison#a-quick-demonstration","position":20},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#a-quick-demonstration","position":21},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl5","url":"/notebooks/simplified-calc/kernel-comparison#of-further-and-further","position":22},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#of-further-and-further","position":23},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl6":"header levels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl6","url":"/notebooks/simplified-calc/kernel-comparison#header-levels","position":24},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl6":"header levels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"\n\nas well m = a * t / h text! Similarly, you have access to other \\LaTeX equation \n\nfunctionality via MathJax (demo below from link),\\begin{align}\n\\dot{x} & = \\sigma(y-x) \\\\\n\\dot{y} & = \\rho x - y - xz \\\\\n\\dot{z} & = -\\beta z + xy\n\\end{align}\n\nCheck out \n\nany number of helpful Markdown resources for further customizing your notebooks and the \n\nJupyter docs for Jupyter-specific formatting information. Don’t hesitate to ask questions if you have problems getting it to look just right.\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#header-levels","position":25},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Last Section"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#last-section","position":26},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Last Section"},"content":"If you’re comfortable, and as we briefly used for our embedded logo up top, you can embed raw html into Jupyter Markdown cells (edit to see):\n\nInfoYour relevant information here!\n\nFeel free to copy this around and edit or play around with yourself. Some other admonitions you can put in:\n\nSuccessWe got this done after all!\n\nWarningBe careful!\n\nDangerScary stuff be here.\n\nWe also suggest checking out Jupyter Book’s \n\nbrief demonstration on adding cell tags to your cells in Jupyter Notebook, Lab, or manually. Using these cell tags can allow you to \n\ncustomize how your code content is displayed and even \n\ndemonstrate errors without altogether crashing our loyal army of machines!\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#last-section","position":27},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Summary"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#summary","position":28},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Summary"},"content":"Add one final --- marking the end of your body of content, and then conclude with a brief single paragraph summarizing at a high level the key pieces that were learned and how they tied to your objectives. Look to reiterate what the most important takeaways were.","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#summary","position":29},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"What’s next?","lvl2":"Summary"},"type":"lvl3","url":"/notebooks/simplified-calc/kernel-comparison#whats-next","position":30},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl3":"What’s next?","lvl2":"Summary"},"content":"Let Jupyter book tie this to the next (sequential) piece of content that people could move on to down below and in the sidebar. However, if this page uniquely enables your reader to tackle other nonsequential concepts throughout this book, or even external content, link to it here!\n\n","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#whats-next","position":31},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Resources and references"},"type":"lvl2","url":"/notebooks/simplified-calc/kernel-comparison#resources-and-references","position":32},{"hierarchy":{"lvl1":"Comparing Different Kernels","lvl2":"Resources and references"},"content":"Finally, be rigorous in your citations and references as necessary. Give credit where credit is due. Also, feel free to link to relevant external material, further reading, documentation, etc. Then you’re done! Give yourself a quick review, a high five, and send us a pull request. A few final notes:\n\nKernel > Restart Kernel and Run All Cells... to confirm that your notebook will cleanly run from start to finish\n\nKernel > Restart Kernel and Clear All Outputs... before committing your notebook, our machines will do the heavy lifting\n\nTake credit! Provide author contact information if you’d like; if so, consider adding information here at the bottom of your notebook\n\nGive credit! Attribute appropriate authorship for referenced code, information, images, etc.\n\nOnly include what you’re legally allowed: no copyright infringement or plagiarism\n\nThank you for your contribution!","type":"content","url":"/notebooks/simplified-calc/kernel-comparison#resources-and-references","position":33},{"hierarchy":{"lvl1":"State Dependence"},"type":"lvl1","url":"/notebooks/simplified-calc/state-dependence","position":0},{"hierarchy":{"lvl1":"State Dependence"},"content":"Let’s start here! If you can directly link to an image relevant to your notebook, such as \n\ncanonical logos, do so here at the top of your notebook. You can do this with Markdown syntax,\n\n![<image title>](http://link.com/to/image.png \"image alt text\")\n\nor edit this cell to see raw HTML img demonstration. This is preferred if you need to shrink your embedded image. Either way be sure to include alt text for any embedded images to make your content more accessible.\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence","position":1},{"hierarchy":{"lvl1":"State Dependence"},"type":"lvl1","url":"/notebooks/simplified-calc/state-dependence#state-dependence","position":2},{"hierarchy":{"lvl1":"State Dependence"},"content":"Next, title your notebook appropriately with a top-level Markdown header, #. Do not use this level header anywhere else in the notebook. Our book build process will use this title in the navbar, table of contents, etc. Keep it short, keep it descriptive. Follow this with a --- cell to visually distinguish the transition to the prerequisites section.\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#state-dependence","position":3},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Overview"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#overview","position":4},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Overview"},"content":"If you have an introductory paragraph, lead with it here! Keep it short and tied to your material, then be sure to continue into the required list of topics below,\n\nThis is a numbered list of the specific topics\n\nThese should map approximately to your main sections of content\n\nOr each second-level, ##, header in your notebook\n\nKeep the size and scope of your notebook in check\n\nAnd be sure to let the reader know up front the important concepts they’ll be leaving with\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#overview","position":5},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Prerequisites"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#prerequisites","position":6},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Prerequisites"},"content":"This section was inspired by \n\nthis template of the wonderful \n\nThe Turing Way Jupyter Book.\n\nFollowing your overview, tell your reader what concepts, packages, or other background information they’ll need before learning your material. Tie this explicitly with links to other pages here in Foundations or to relevant external resources. Remove this body text, then populate the Markdown table, denoted in this cell with | vertical brackets, below, and fill out the information following. In this table, lay out prerequisite concepts by explicitly linking to other Foundations material or external resources, or describe generally helpful concepts.\n\nLabel the importance of each concept explicitly as helpful/necessary.\n\nConcepts\n\nImportance\n\nNotes\n\nIntro to Cartopy\n\nNecessary\n\n\n\nUnderstanding of NetCDF\n\nHelpful\n\nFamiliarity with metadata structure\n\nProject management\n\nHelpful\n\n\n\nTime to learn: estimate in minutes. For a rough idea, use 5 mins per subsection, 10 if longer; add these up for a total. Safer to round up and overestimate.\n\nSystem requirements:\n\nPopulate with any system, version, or non-Python software requirements if necessary\n\nOtherwise use the concepts table above and the Imports section below to describe required packages as necessary\n\nIf no extra requirements, remove the System requirements point altogether\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#prerequisites","position":7},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Imports"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#imports","position":8},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Imports"},"content":"Begin your body of content with another --- divider before continuing into this section, then remove this body text and populate the following code cell with all necessary Python imports up-front:\n\nimport sys\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#imports","position":9},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Your first content section"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#your-first-content-section","position":10},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Your first content section"},"content":"\n\nThis is where you begin your first section of material, loosely tied to your objectives stated up front. Tie together your notebook as a narrative, with interspersed Markdown text, images, and more as necessary,\n\n# as well as any and all of your code cells\nprint(\"Hello world!\")\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#your-first-content-section","position":11},{"hierarchy":{"lvl1":"State Dependence","lvl3":"A content subsection","lvl2":"Your first content section"},"type":"lvl3","url":"/notebooks/simplified-calc/state-dependence#a-content-subsection","position":12},{"hierarchy":{"lvl1":"State Dependence","lvl3":"A content subsection","lvl2":"Your first content section"},"content":"Divide and conquer your objectives with Markdown subsections, which will populate the helpful navbar in Jupyter Lab and here on the Jupyter Book!\n\n# some subsection code\nnew = \"helpful information\"\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#a-content-subsection","position":13},{"hierarchy":{"lvl1":"State Dependence","lvl3":"Another content subsection","lvl2":"Your first content section"},"type":"lvl3","url":"/notebooks/simplified-calc/state-dependence#another-content-subsection","position":14},{"hierarchy":{"lvl1":"State Dependence","lvl3":"Another content subsection","lvl2":"Your first content section"},"content":"Keep up the good work! A note, try to avoid using code comments as narrative, and instead let them only exist as brief clarifications where necessary.\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#another-content-subsection","position":15},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Your second content section"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#your-second-content-section","position":16},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Your second content section"},"content":"Here we can move on to our second objective, and we can demonstrate\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#your-second-content-section","position":17},{"hierarchy":{"lvl1":"State Dependence","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl3","url":"/notebooks/simplified-calc/state-dependence#subsection-to-the-second-section","position":18},{"hierarchy":{"lvl1":"State Dependence","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/simplified-calc/state-dependence#subsection-to-the-second-section","position":19},{"hierarchy":{"lvl1":"State Dependence","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl4","url":"/notebooks/simplified-calc/state-dependence#a-quick-demonstration","position":20},{"hierarchy":{"lvl1":"State Dependence","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/simplified-calc/state-dependence#a-quick-demonstration","position":21},{"hierarchy":{"lvl1":"State Dependence","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl5","url":"/notebooks/simplified-calc/state-dependence#of-further-and-further","position":22},{"hierarchy":{"lvl1":"State Dependence","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"","type":"content","url":"/notebooks/simplified-calc/state-dependence#of-further-and-further","position":23},{"hierarchy":{"lvl1":"State Dependence","lvl6":"header levels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"type":"lvl6","url":"/notebooks/simplified-calc/state-dependence#header-levels","position":24},{"hierarchy":{"lvl1":"State Dependence","lvl6":"header levels","lvl5":"of further and further","lvl4":"a quick demonstration","lvl3":"Subsection to the second section","lvl2":"Your second content section"},"content":"\n\nas well m = a * t / h text! Similarly, you have access to other \\LaTeX equation \n\nfunctionality via MathJax (demo below from link),\\begin{align}\n\\dot{x} & = \\sigma(y-x) \\\\\n\\dot{y} & = \\rho x - y - xz \\\\\n\\dot{z} & = -\\beta z + xy\n\\end{align}\n\nCheck out \n\nany number of helpful Markdown resources for further customizing your notebooks and the \n\nJupyter docs for Jupyter-specific formatting information. Don’t hesitate to ask questions if you have problems getting it to look just right.\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#header-levels","position":25},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Last Section"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#last-section","position":26},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Last Section"},"content":"If you’re comfortable, and as we briefly used for our embedded logo up top, you can embed raw html into Jupyter Markdown cells (edit to see):\n\nInfoYour relevant information here!\n\nFeel free to copy this around and edit or play around with yourself. Some other admonitions you can put in:\n\nSuccessWe got this done after all!\n\nWarningBe careful!\n\nDangerScary stuff be here.\n\nWe also suggest checking out Jupyter Book’s \n\nbrief demonstration on adding cell tags to your cells in Jupyter Notebook, Lab, or manually. Using these cell tags can allow you to \n\ncustomize how your code content is displayed and even \n\ndemonstrate errors without altogether crashing our loyal army of machines!\n\n\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#last-section","position":27},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Summary"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#summary","position":28},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Summary"},"content":"Add one final --- marking the end of your body of content, and then conclude with a brief single paragraph summarizing at a high level the key pieces that were learned and how they tied to your objectives. Look to reiterate what the most important takeaways were.","type":"content","url":"/notebooks/simplified-calc/state-dependence#summary","position":29},{"hierarchy":{"lvl1":"State Dependence","lvl3":"What’s next?","lvl2":"Summary"},"type":"lvl3","url":"/notebooks/simplified-calc/state-dependence#whats-next","position":30},{"hierarchy":{"lvl1":"State Dependence","lvl3":"What’s next?","lvl2":"Summary"},"content":"Let Jupyter book tie this to the next (sequential) piece of content that people could move on to down below and in the sidebar. However, if this page uniquely enables your reader to tackle other nonsequential concepts throughout this book, or even external content, link to it here!\n\n","type":"content","url":"/notebooks/simplified-calc/state-dependence#whats-next","position":31},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Resources and references"},"type":"lvl2","url":"/notebooks/simplified-calc/state-dependence#resources-and-references","position":32},{"hierarchy":{"lvl1":"State Dependence","lvl2":"Resources and references"},"content":"Finally, be rigorous in your citations and references as necessary. Give credit where credit is due. Also, feel free to link to relevant external material, further reading, documentation, etc. Then you’re done! Give yourself a quick review, a high five, and send us a pull request. A few final notes:\n\nKernel > Restart Kernel and Run All Cells... to confirm that your notebook will cleanly run from start to finish\n\nKernel > Restart Kernel and Clear All Outputs... before committing your notebook, our machines will do the heavy lifting\n\nTake credit! Provide author contact information if you’d like; if so, consider adding information here at the bottom of your notebook\n\nGive credit! Attribute appropriate authorship for referenced code, information, images, etc.\n\nOnly include what you’re legally allowed: no copyright infringement or plagiarism\n\nThank you for your contribution!","type":"content","url":"/notebooks/simplified-calc/state-dependence#resources-and-references","position":33},{"hierarchy":{"lvl1":"References"},"type":"lvl1","url":"/references","position":0},{"hierarchy":{"lvl1":"References"},"content":"","type":"content","url":"/references","position":1}]}